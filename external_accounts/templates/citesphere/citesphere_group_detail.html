{% extends "annotations/base.html" %}
{% load static %}

{% block breadcrumbs %}
    <a href="{% url 'home' %}" class="btn btn-xs">Home</a>
    &raquo;<a href="{% url 'dashboard' %}" class="btn btn-xs">Dashboard</a>
    &raquo;<a href="{% url 'list_citesphere_groups' %}" class="btn btn-xs">Citesphere Groups</a>
    &raquo;<a href="{% url 'citesphere_group_detail' slug %}" class="btn btn-xs">{{ group.name }}</a>
{% endblock %}

{% block main %}

    {% if messages %}
    <div class="container mt-3">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="container mt-4">
        <h1 style="margin-bottom: 15px;">{{ group.name }}</h1>
        <p><strong>ID:</strong> {{ group.group_id }}</p>
        <p><strong>Type:</strong> {{ group.type }}</p>
        <p><strong>Number of Items:</strong> {{ group.num_items }}</p>
        <p><strong>Date Created:</strong> {{ group.date_created }}</p>
        <p><strong>Last Modified:</strong> {{ group.date_modified }}</p>
        <p><strong>Description:</strong> {{ group.description }}</p>
        
        <div class="container mt-4">
            <div class="row">
                <div class="col-md-6">
                    <h2>Collections</h2>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Collection Name</th>
                                <th>Number of Items</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for collection in collections %}
                            <tr onclick="showItems('{{ collection.key }}')">
                                <td>{{ collection.name }}</td>
                                <td>{{ collection.number_of_items }}</td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="2">No collections found.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="col-md-6">
                    <h2>Items</h2>
                    <table class="table table-bordered" id="itemsTable">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Authors</th>
                                <th>Title</th>
                                <th>Date</th>
                                <th>URL</th>
                                <th>Files</th>
                                <th>Import</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in items %}
                            <tr>
                                <td>{{ item.itemType }}</td>
                                <td>{{ item.authors }}</td>
                                <td>{{ item.title }}</td>
                                <td>{{ item.date|date:"Y-m-d" }}</td>
                                <td>{% if item.url %}<a href="{{ item.url }}" target="_blank">Link</a>{% else %}{% endif %}</td>
                                <td>{{ item.files }}</td>
                                <td><a href="#"></a></td>
                            </tr>
                            {% empty %}
                            <tr><td colspan="7">No items found.</td></tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        {% endblock %}
        
